
> 当前项目是一个 **使用 Vite 创建的 React 项目**，定位为 **h5 应用**，需要在 **手机 / 平板 / Web** 上都能正常展示与使用。
> 项目当前未使用全局状态管理，存在 **props 层层传递、App.jsx 逻辑过重、组件耦合度高** 等问题。
> 请在 **不影响现有功能与交互的前提下**，完成以下功能新增与工程重构。

---

## 一、功能需求

用户登录后，首页展示 **4 个功能卡片**：

### 1️⃣ 每日一卦

* **标题**：每日一卦
* **副标题**：晨起抽一卦，洞悉当下气运，趋吉避凶
* **点击行为**：

    * 跳转到新页面（新路由）
    * Header 内容保持不变
    * Header 中显示「返回首页」按钮

---

### 2️⃣ 八字测算

* **副标题**：根据生辰八字剖析命格，寻觅人生节奏
* **点击行为**：

    * 跳转到新页面（新路由）
    * Header 内容保持不变
    * Header 中显示「返回首页」按钮

---

### 3️⃣ 梦境符号

* **副标题**：解读潜意识的象征，找到与现实的暗合
* **点击行为**：

    * 跳转到新页面（新路由）
    * Header 内容保持不变
    * Header 中显示「返回首页」按钮

---

### 4️⃣ 大师解惑

* **副标题**：困于情感抉择或事业迷雾，获得即时灵感
* **点击行为**：

    * 进入当前已经存在的聊天页面（包含「问过的事儿 / 在听你说 / 参考点什么」）
    * Header 中同样需要支持「返回首页」

---

## 二、路由系统要求（必须）

1. 必须引入 `react-router`
2. **所有路由配置必须集中在一个固定文件中**

    * 例如：`src/router/router.config.ts`
3. 使用 **Layout + Outlet** 结构：

    * Header 为全局布局组件
    * 页面组件只负责自身内容
4. 页面跳转与返回逻辑通过路由与全局状态控制，**禁止硬编码在组件内部**

---

## 三、全局状态管理（重点）

### 1️⃣ 必须引入 Store

* 使用 **Zustand** 作为全局状态管理方案
* 不使用 Redux / MobX / 多层 Context
* Store 文件统一放在 `src/store/` 目录下

---

### 2️⃣ Store 使用原则

* Store **只存跨页面、跨组件共享的数据**
* 页面内部 UI 状态仍使用 `useState`
* 禁止将所有状态无脑放入 Store

---

### 3️⃣ 建议的 Store 拆分方式（可合理调整）

* `useUserStore`

    * 登录状态
    * 用户基础信息（昵称、头像等）

* `useAppStore`

    * 当前功能模块（home / daily / bazi / dream / chat）
    * Header 状态（是否显示返回按钮）

* `useChatStore`

    * 聊天历史记录
    * 当前聊天模式（大师解惑）

---

### 4️⃣ 必须达成的目标

* ❌ 不再通过 props 层层传递：

    * 用户信息
    * Header 控制状态
    * 当前功能模块类型
* ✅ 页面与组件通过 Store 直接读取状态
* ✅ 状态流向清晰、可维护

---

## 四、App.jsx 重构要求（必须）

当前 `App.jsx` 逻辑过多，请进行拆分与重构：

### App.jsx 只负责：

* 全局布局
* 路由出口
* 必要的 Provider（如有）

### 需要下沉的内容：

* 页面业务状态
* 聊天相关逻辑
* 首页卡片点击后的状态判断

### 初始化判断：

* 如登录态、首屏路由判断
* 可放在 `main.jsx` 或独立 bootstrap 文件中

⚠️ 重构过程中 **不得影响现有功能和交互行为**

---

## 五、UI / 交互要求（玻璃拟态）

1. 首页卡片：

    * 玻璃拟态风格（半透明背景 + 模糊 + 柔和阴影）
    * 点击时有轻微 `scale / opacity` 反馈
    * 移动端：1 列或 2 列自适应
    * Pad / Web：2～4 列自适应布局

2. 页面切换：

    * 支持轻量过渡动画（淡入 / 位移）
    * 返回首页按钮在视觉上清晰可识别

3. 响应式要求：

    * 不出现横向滚动
    * 字体大小在移动端可读
    * 点击区域符合移动端交互规范

---

## 六、输出要求（必须给出）

请在实现过程中，明确给出：

1. 路由配置文件示例
2. Store 目录结构与至少一个 Zustand Store 示例
3. 重构前 vs 重构后的状态流转说明
4. 关键组件如何通过 Store 读取与更新状态的示例
5. 主要文件结构说明（目录级）

---

## 七、约束说明

* 不引入不必要的第三方 UI 库
* 不改变现有功能表现
* 代码结构清晰、可维护、注释简洁

---

💬 **说明**：
本次需求不仅是功能新增，更是一次 **工程结构与状态管理的系统性优化**，请以“长期可维护的 h5 产品项目”为目标完成。

---
